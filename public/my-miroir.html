<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>My Miroir | Miroir - Personal Reflection Space</title>
  <meta name="description" content="Your personal space for authentic self-reflection and truth exploration in the Miroir platform." />
  <link rel="stylesheet" href="/styles/unified.css" />
</head>
<body class="loading">
  <!-- Skip link for accessibility -->
  <a href="#main-content" class="skip-link">Skip to main content</a>

  <!-- Background effects -->
  <canvas id="bgCanvas" class="bg-canvas" aria-hidden="true"></canvas>
  <div class="bg-gradient" aria-hidden="true"></div>

  <!-- Navigation -->
  <button class="nav-toggle" 
          aria-label="Toggle navigation menu" 
          aria-expanded="false"
          aria-controls="navigation-menu">
    <span></span>
    <span></span>
    <span></span>
  </button>

  <nav class="nav-menu" 
       id="navigation-menu" 
       role="navigation" 
       aria-label="Main navigation"
       aria-hidden="true">
    <a href="/index.html">Home</a>
    <a href="/about.html">About</a>
    <a href="/our-miroirs.html">Our Miroirs</a>
    <a href="/truth-tools.html">Truth Tools</a>
    <a href="/living-archive.html">Living Archive</a>
    <a href="/reflections.html">Reflections</a>
    <a href="/publications.html">Publications</a>
  </nav>

  <!-- Main content -->
  <main class="container py-xl" id="main-content">
    <header class="text-center mb-2xl">
      <img src="/miroir.png" 
           alt="Miroir Logo" 
           class="logo logo-glow mb-lg" />
      <h1 class="text-accent mb-md">My Miroir</h1>
      <p class="text-lg text-secondary">Your personal space for authentic reflection</p>
    </header>

    <section class="mb-2xl scroll-reveal">
      <div class="card text-center mb-xl" style="max-width: 600px; margin: 0 auto;">
        <h2 class="card-title">Step Into Your Truth</h2>
        <p class="text-secondary mb-lg">
          This is your private sanctuary within Miroir—a space where you can explore your authentic self 
          without judgment, reflect on your experiences, and document your journey toward deeper truth.
        </p>
        <blockquote class="quote text-base mb-lg">
          The most courageous act is still to think for yourself. Aloud.
        </blockquote>
      </div>
    </section>

    <section class="mb-2xl">
      <h2 class="text-center text-accent mb-xl">Reflection Tools</h2>
      
      <div class="grid grid-cols-1 gap-lg mb-xl" style="max-width: 1000px; margin: 0 auto;">
        <article class="card scroll-reveal">
          <h3 class="card-title">Truth Journal</h3>
          <p class="text-secondary mb-md">
            A private space to write your authentic thoughts, experiences, and insights without 
            the pressure of public consumption or social validation.
          </p>
          <button class="btn btn-primary btn-sm" disabled>
            Coming Soon
          </button>
        </article>

        <article class="card scroll-reveal">
          <h3 class="card-title">Memory Mirror</h3>
          <p class="text-secondary mb-md">
            Interactive tools to explore and understand your personal history, identifying 
            patterns, growth, and the evolution of your authentic self over time.
          </p>
          <button class="btn btn-primary btn-sm" disabled>
            Coming Soon
          </button>
        </article>

        <article class="card scroll-reveal">
          <h3 class="card-title">Authenticity Compass</h3>
          <p class="text-secondary mb-md">
            Guided exercises and prompts designed to help you navigate life decisions 
            through the lens of your core values and authentic desires.
          </p>
          <button class="btn btn-primary btn-sm" disabled>
            Coming Soon
          </button>
        </article>
      </div>
    </section>

    <section class="mb-2xl">
      <h2 class="text-center text-accent mb-xl">Your Reflection Space</h2>
      
      <div class="card scroll-reveal" style="max-width: 800px; margin: 0 auto;">
        <h3 class="card-title">Quick Reflection</h3>
        <p class="text-secondary mb-lg">
          Take a moment to reflect on this question. Your response remains private to you.
        </p>
        
        <div class="mb-lg">
          <label for="reflection-prompt" class="block text-lg font-medium text-primary mb-md">
            What truth about yourself are you ready to acknowledge today?
          </label>
          <textarea 
            id="reflection-prompt"
            class="w-full p-md border border-accent rounded-lg bg-tertiary text-primary"
            style="min-height: 120px; resize: vertical; border-color: var(--border-accent);"
            placeholder="Your thoughts remain private and are not stored anywhere..."
            aria-describedby="privacy-notice">
          </textarea>
          <p id="privacy-notice" class="text-sm text-muted mt-sm">
            <em>Note: This is a local reflection tool. Your words are not saved or transmitted.</em>
          </p>
        </div>
        
        <div class="flex justify-center gap-md">
          <button class="btn btn-ghost btn-sm" onclick="clearReflection()">
            Clear
          </button>
          <button class="btn btn-primary btn-sm" onclick="saveReflectionLocally()">
            Save Locally
          </button>
        </div>
      </div>
    </section>

    <section class="text-center scroll-reveal">
      <h2 class="text-accent mb-lg">The Journey Continues</h2>
      <p class="text-lg text-secondary mb-xl" style="max-width: 600px; margin: 0 auto;">
        Authentic self-discovery is not a destination but an ongoing practice. 
        Each moment of honest reflection brings you closer to living as your truest self.
      </p>
      
      <div class="flex justify-center gap-md flex-wrap">
        <a href="/truth-tools.html" class="btn btn-primary">
          Explore Truth Tools
        </a>
        <a href="/our-miroirs.html" class="btn btn-ghost">
          See Other Reflections
        </a>
      </div>
    </section>
  </main>

  <!-- Background music -->
  <audio id="bgMusic" loop preload="auto" aria-label="Ambient background music">
    <source src="/relaxing-electronic-ambient-music-354471.mp3" type="audio/mpeg" />
    <p>Your browser does not support the audio element.</p>
  </audio>

  <!-- Music toggle -->
  <button id="musicToggle" 
          class="music-toggle" 
          aria-label="Toggle background music"
          title="Toggle background music">
    <svg viewBox="0 0 24 24" aria-hidden="true">
      <path d="M3 9v6h4l5 5V4L7 9H3z"></path>
    </svg>
  </button>

  <!-- Unified JavaScript -->
  <script src="/scripts/unified.js"></script>
  
  <script>
    // Local reflection functionality
    function clearReflection() {
      const textarea = document.getElementById('reflection-prompt');
      textarea.value = '';
      textarea.focus();
      
      if (window.miroirApp) {
        window.miroirApp.announceToScreenReader('Reflection cleared');
      }
    }
    
    function saveReflectionLocally() {
      const textarea = document.getElementById('reflection-prompt');
      const content = textarea.value.trim();
      
      if (!content) {
        if (window.miroirApp) {
          window.miroirApp.announceToScreenReader('Please write something before saving');
        }
        return;
      }
      
      // Save to localStorage with timestamp
      const reflection = {
        content: content,
        timestamp: new Date().toISOString(),
        id: Date.now()
      };
      
      let reflections = JSON.parse(localStorage.getItem('miroir-reflections') || '[]');
      reflections.push(reflection);
      
      // Keep only last 10 reflections
      if (reflections.length > 10) {
        reflections = reflections.slice(-10);
      }
      
      localStorage.setItem('miroir-reflections', JSON.stringify(reflections));
      
      if (window.miroirApp) {
        window.miroirApp.announceToScreenReader('Reflection saved locally');
      }
      
      // Visual feedback
      const button = event.target;
      const originalText = button.textContent;
      button.textContent = 'Saved ✓';
      button.disabled = true;
      
      setTimeout(() => {
        button.textContent = originalText;
        button.disabled = false;
      }, 2000);
    }
    
    // Load a random reflection on page load (if any exist)
    document.addEventListener('DOMContentLoaded', () => {
      const reflections = JSON.parse(localStorage.getItem('miroir-reflections') || '[]');
      if (reflections.length > 0) {
        // Show count of saved reflections
        const textarea = document.getElementById('reflection-prompt');
        textarea.placeholder = `You have ${reflections.length} saved reflection${reflections.length === 1 ? '' : 's'}. Start a new one...`;
      }
    });
  </script>
</body>
</html>